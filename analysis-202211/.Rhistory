# setup
packages = c("tidyverse", "ggplot2", "dplyr", "RColorBrewer", "irr", 'readr', 'readxl')
package.check <- lapply(
packages,
FUN = function(x) {
if (!require(x, character.only = TRUE)) {
install.packages(x, dependencies = TRUE)
library(x, character.only = TRUE)
}
}
)
?gather
264/33
library(xlsx)
pre <- read.xlsx("./data/pre.xlsx", sheetIndex = 1)
library(xlsx)
=======
# setup
packages = c("tidyverse", "ggplot2", "dplyr", "RColorBrewer", "irr", 'readr', 'readxl')
package.check <- lapply(
packages,
FUN = function(x) {
if (!require(x, character.only = TRUE)) {
install.packages(x, dependencies = TRUE)
library(x, character.only = TRUE)
}
}
)
install.packages("tidyverse")
library("tidyverse")
library("tidyverse")
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_knit$set(root.dir = '../') # run getwd()
# setup
packages = c("tidyverse", "ggplot2", "dplyr", "RColorBrewer", "irr", 'readr', 'readxl')
install.packages("tidyverse")
library("tidyverse")
library("dbplyr")
# ggplot theme
theme_set(theme_light())
library("ggplot2")
library("dplyr")
library("RColorBrewer")
library("irr")
library('readxl')
library("irr")
install.packages("irr")
library("irr")
library('readxl')
# ggplot theme
theme_set(theme_light())
post <- read_excel("../data/data.xlsx", sheet = "Post")
pre <- read_excel("../data/data.xlsx", sheet = "Pre")
View(post)
View(pre)
gather(pre, keys="pre_question", value="points", 7:14)
install.packages("tidyr")
install.packages("tidyr")
install.packages("tidyr")
#install.packages("irr")
library("tidyr")
gather(pre, keys="pre_question", value="points", 7:14)
gather(pre, keys="pre", value="points", 7:14)
gather(pre, keys="pre_question", value="points", 7:8)
gather(pre, keys="pre_question", value="points", 2:3)
gather(pre, key="pre_question", value="points", 2:3)
gather(pre, key="pre_question", value="points", 7:14)
pre2 <- gather(pre, key="pre_question", value="points", 7:14)
View(pre2)
pre$pre_2 = NULL
View(pre)
pre2 <- gather(pre, key="pre_question", value="points", 7:14)
pre2 <- subset(pre, select = -c(pre_2))
pre <- read_excel("../data/data.xlsx", sheet = "Pre")
post <- read_excel("../data/data.xlsx", sheet = "Post")
library('readxl')
pre <- read_excel("../data/data.xlsx", sheet = "Pre")
post <- read_excel("../data/data.xlsx", sheet = "Post")
pre2 <- subset(pre, select = -c(pre_2))
pre2 <- gather(pre2, key="pre_question", value="points", 7:14)
View(pre2)
unique(pre2$points)
pre2 <- gather(pre2, key="pre_question", value="points", 7:13)
pre2 <- subset(pre, select = -c(pre_2))
pre2 <- gather(pre2, key="pre_question", value="points", 7:13)
unique(pre2$points)
pre2 <- na.omit(pre2)
pre <- read_excel("../data/data.xlsx", sheet = "Pre")
post <- read_excel("../data/data.xlsx", sheet = "Post")
pre2 <- subset(pre, select = -c(pre_2))
which(pre$id == 20, arr.ind=TRUE)
subset(pre, id!=20)
p <- subset(pre, id!=20)
View(p)
pre <- read_excel("../data/data.xlsx", sheet = "Pre")
post <- read_excel("../data/data.xlsx", sheet = "Post")
pre <- subset(pre, id!=20)
pre2 <- subset(pre, select = -c(pre_2))
pre2 <- gather(pre2, key="pre_question", value="points", 7:13)
View(pre2)
unique(pre2$pre_question)
pre <- read_excel("../data/data.xlsx", sheet = "Pre")
post <- read_excel("../data/data.xlsx", sheet = "Post")
pre <- subset(pre, id!=20)
post <- subset(post, id!=20)
pre2 <- subset(pre, select = -c(pre_2))
pre2 <- gather(pre2, key="pre_question", value="points", 7:13)
post2 <- gather(post, key="post_question", value="points", 3:10)
unique(pre2$pre_question)
pre2 <- gather(pre2, key="question", value="points", 7:13)
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_knit$set(root.dir = '../') # run getwd()
# setup
packages = c("tidyverse", "ggplot2", "dplyr", "RColorBrewer", "irr", 'readr', 'readxl')
package.check <- lapply(
packages,
FUN = function(x) {
if (!require(x, character.only = TRUE)) {
install.packages(x, dependencies = TRUE)
library(x, character.only = TRUE)
}
}
)
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_knit$set(root.dir = '../') # run getwd()
#
# # setup
# packages = c("tidyverse", "ggplot2", "dplyr", "RColorBrewer", "irr", 'readr', 'readxl')
#
# package.check <- lapply(
#   packages,
#   FUN = function(x) {
#     if (!require(x, character.only = TRUE)) {
#       install.packages(x, dependencies = TRUE)
#       library(x, character.only = TRUE)
#     }
#   }
# )
#install.packages("irr")
library("tidyr")
library("dbplyr")
library("ggplot2")
library("dplyr")
library("RColorBrewer")
library("irr")
library('readxl')
# ggplot theme
theme_set(theme_light())
pre <- read_excel("../data/data.xlsx", sheet = "Pre")
post <- read_excel("../data/data.xlsx", sheet = "Post")
pre <- subset(pre, id!=20)
post <- subset(post, id!=20)
pre2 <- subset(pre, select = -c(pre_2))
pre2 <- gather(pre2, key="question", value="points", 7:13)
post2 <- gather(post, key="question", value="points", 3:10)
unique(pre2$question)
unique(post2$question)
df <- rbind(pre, post)
df <- rbind(pre2, post2)
pre2[,c("id", "study_type", "question", "points")]
pre2 <- pre2[,c("id", "study_type", "question", "points")]
post2 <- post2[,c("id", "study_type", "question", "points")]
df <- rbind(pre2, post2)
df %>%
ggplot(aes(x=type, y = val, color= type)) +
xlab("") + ylab("mean answer scale")+
ggtitle("95% CI for mean")+
stat_summary(fun.data = "mean_cl_boot", size = 0.5, position = position_nudge(x=0.00, y=0), alpha=1) +
coord_flip() +
facet_wrap(. ~ description)
df %>%
ggplot(aes(x=study_type, y = points, color= study_type)) +
xlab("") + ylab("mean answer scale")+
ggtitle("95% CI for mean")+
stat_summary(fun.data = "mean_cl_boot", size = 0.5, position = position_nudge(x=0.00, y=0), alpha=1) +
coord_flip() +
facet_wrap(. ~question)
library(boot)
df %>%
ggplot(aes(x=study_type, y = points, color= study_type)) +
xlab("") + ylab("mean answer scale")+
ggtitle("95% CI for mean")+
stat_summary(fun.data = "mean_cl_boot", size = 0.5, position = position_nudge(x=0.00, y=0), alpha=1) +
coord_flip() +
facet_wrap(. ~question)
library("boot")
df %>%
ggplot(aes(x=study_type, y = points, color= study_type)) +
xlab("") + ylab("mean answer scale")+
ggtitle("95% CI for mean")+
stat_summary(fun.data = "mean_cl_boot", size = 0.5, position = position_nudge(x=0.00, y=0), alpha=1) +
coord_flip() +
facet_wrap(.~question)
library("rstatix")
df %>%
ggplot(aes(x=study_type, y = points, color= study_type)) +
xlab("") + ylab("mean answer scale")+
ggtitle("95% CI for mean")+
stat_summary(fun.data = "mean_cl_boot", size = 0.5, position = position_nudge(x=0.00, y=0), alpha=1) +
coord_flip() +
facet_wrap(.~question)
class(df$points)
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_knit$set(root.dir = '../') # run getwd()
#
# # setup
# packages = c("tidyverse", "ggplot2", "dplyr", "RColorBrewer", "irr", 'readr', 'readxl')
#
# package.check <- lapply(
#   packages,
#   FUN = function(x) {
#     if (!require(x, character.only = TRUE)) {
#       install.packages(x, dependencies = TRUE)
#       library(x, character.only = TRUE)
#     }
#   }
# )
#install.packages("irr")
library("tidyr")
library("dbplyr")
library("ggplot2")
library("dplyr")
library("RColorBrewer")
library("irr")
library('readxl')
library("boot")
library("rstatix")
# ggplot theme
theme_set(theme_light())
pre <- read_excel("../data/data.xlsx", sheet = "Pre")
post <- read_excel("../data/data.xlsx", sheet = "Post")
pre <- subset(pre, id!=20)
post <- subset(post, id!=20)
pre2 <- subset(pre, select = -c(pre_2))
pre2 <- gather(pre2, key="question", value="val", 7:13)
post2 <- gather(post, key="question", value="val", 3:10)
pre_question_ids <- unique(pre2$question)
post_question_ids <- unique(post2$question)
pre2 <- pre2[,c("id", "study_type", "question", "val")]
post2 <- post2[,c("id", "study_type", "question", "val")]
df <- rbind(pre2, post2)
df %>%
ggplot(aes(x=study_type, y = val, color= study_type)) +
xlab("") + ylab("mean answer scale")+
ggtitle("95% CI for mean")+
stat_summary(fun.data = "mean_cl_boot", size = 0.5, position = position_nudge(x=0.00, y=0), alpha=1) +
coord_flip() +
facet_wrap(.~question)
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_knit$set(root.dir = '../') # run getwd()
#
# # setup
# packages = c("tidyverse", "ggplot2", "dplyr", "RColorBrewer", "irr", 'readr', 'readxl')
#
# package.check <- lapply(
#   packages,
#   FUN = function(x) {
#     if (!require(x, character.only = TRUE)) {
#       install.packages(x, dependencies = TRUE)
#       library(x, character.only = TRUE)
#     }
#   }
# )
#install.packages("irr")
library("tidyr")
library("dbplyr")
library("ggplot2")
library("dplyr")
library("RColorBrewer")
library("irr")
library('readxl')
library("boot")
library("rstatix")
# ggplot theme
theme_set(theme_light())
pre <- read_excel("../data/data.xlsx", sheet = "Pre")
post <- read_excel("../data/data.xlsx", sheet = "Post")
pre <- subset(pre, id!=20)
post <- subset(post, id!=20)
pre2 <- subset(pre, select = -c(pre_2))
pre2 <- gather(pre2, key="question", value="val", 7:13)
post2 <- gather(post, key="question", value="val", 3:10)
pre_question_ids <- unique(pre2$question)
post_question_ids <- unique(post2$question)
pre2 <- pre2[,c("id", "study_type", "question", "val")]
post2 <- post2[,c("id", "study_type", "question", "val")]
df <- rbind(pre2, post2)
df %>%
ggplot(aes(x=study_type, y = val, color= study_type)) +
xlab("") + ylab("mean answer scale")+
ggtitle("95% CI for mean")+
stat_summary(fun.data = "mean_cl_boot", size = 0.5, position = position_nudge(x=0.00, y=0), alpha=1) +
coord_flip() +
facet_wrap(.~question)
df %>%
ggplot(aes(x=study_type, y = val, color= study_type)) +
xlab("") + ylab("mean answer scale")+
ggtitle("95% CI for mean")+
stat_summary(fun.data = "mean", size = 0.5, position = position_nudge(x=0.00, y=0), alpha=1) +
coord_flip() +
facet_wrap(.~question)
View(df)
df %>%
ggplot(aes(x=study_type, y = val, color= study_type)) +
xlab("") + ylab("mean answer scale")+
ggtitle("95% CI for mean")+
stat_summary(fun.data = "mean_ci_boot", size = 0.5, position = position_nudge(x=0.00, y=0), alpha=1) +
coord_flip() +
facet_wrap(.~question)
library("Hmisc")
install.packages("Hmisc")
library("Hmisc")
update.packages()
library("Hmisc")
install.packages('stringi')
install.packages('Hmisc')
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_knit$set(root.dir = '../') # run getwd()
#
# # setup
# packages = c("tidyverse", "ggplot2", "dplyr", "RColorBrewer", "irr", 'readr', 'readxl')
#
# package.check <- lapply(
#   packages,
#   FUN = function(x) {
#     if (!require(x, character.only = TRUE)) {
#       install.packages(x, dependencies = TRUE)
#       library(x, character.only = TRUE)
#     }
#   }
# )
#install.packages("irr")
library("tidyr")
library("dbplyr")
library("ggplot2")
library("dplyr")
library("RColorBrewer")
library("irr")
library('readxl')
library("boot")
library("Hmisc")
#install.packages('stringi')
#install.packages('Hmisc')
# ggplot theme
theme_set(theme_light())
pre <- read_excel("../data/data.xlsx", sheet = "Pre")
post <- read_excel("../data/data.xlsx", sheet = "Post")
pre <- subset(pre, id!=20)
post <- subset(post, id!=20)
pre2 <- subset(pre, select = -c(pre_2))
pre2 <- gather(pre2, key="question", value="val", 7:13)
post2 <- gather(post, key="question", value="val", 3:10)
pre_question_ids <- unique(pre2$question)
post_question_ids <- unique(post2$question)
pre2 <- pre2[,c("id", "study_type", "question", "val")]
post2 <- post2[,c("id", "study_type", "question", "val")]
df <- rbind(pre2, post2)
df %>%
ggplot(aes(x=study_type, y = val, color= study_type)) +
xlab("") + ylab("mean answer scale")+
ggtitle("95% CI for mean")+
stat_summary(fun.data = "mean_cl_boot", size = 0.5, position = position_nudge(x=0.00, y=0), alpha=1) +
coord_flip() +
facet_wrap(.~question)
>>>>>>> e7c77359bd35bccca8cb78a313428453d7d5f937
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_knit$set(root.dir = '../') # run getwd()
#
# # setup
# packages = c("tidyverse", "ggplot2", "dplyr", "RColorBrewer", "irr", 'readr', 'readxl')
#
# package.check <- lapply(
#   packages,
#   FUN = function(x) {
#     if (!require(x, character.only = TRUE)) {
#       install.packages(x, dependencies = TRUE)
#       library(x, character.only = TRUE)
#     }
#   }
# )
#install.packages("irr")
library("tidyr")
library("dbplyr")
library("ggplot2")
library("dplyr")
library("RColorBrewer")
library("irr")
library('readxl')
library("boot")
library("Hmisc")
#install.packages('stringi')
#install.packages('Hmisc')
# ggplot theme
theme_set(theme_light())
compute_stats = function (qname, c1, c2) {
valc = filter(df, question == qname, study_type == 'control')$val
valh = filter(df, question == qname, study_type == 'hololens')$val
t = t.test(
valc,
valh,
conf.level=.95
)
d = cohen.d(valc, valh, paired=FALSE)
W = wilcox.test(x=valc, y=valh, na.rm=TRUE, paired=FALSE, exact=FALSE, conf.int=TRUE)
stats = data.frame(qname=c(qname), t=c(t$p.value), W=c(W[1]$statistic), d=c(d[3]$estimate))
return(stats)
}
compute_stats = function (df, qname) {
valc = filter(df, question == qname, study_type == 'control')$val
valh = filter(df, question == qname, study_type == 'hololens')$val
t = t.test(
valc,
valh,
conf.level=.95
)
d = cohen.d(valc, valh, paired=FALSE)
W = wilcox.test(x=valc, y=valh, na.rm=TRUE, paired=FALSE, exact=FALSE, conf.int=TRUE)
stats = data.frame(qname=c(qname), t=c(t$p.value), W=c(W[1]$statistic), d=c(d[3]$estimate))
return(stats)
}
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_knit$set(root.dir = '../') # run getwd()
#
# # setup
# packages = c("tidyverse", "ggplot2", "dplyr", "RColorBrewer", "irr", 'readr', 'readxl')
#
# package.check <- lapply(
#   packages,
#   FUN = function(x) {
#     if (!require(x, character.only = TRUE)) {
#       install.packages(x, dependencies = TRUE)
#       library(x, character.only = TRUE)
#     }
#   }
# )
#install.packages("irr")
library("tidyr")
library("dbplyr")
library("ggplot2")
library("dplyr")
library("RColorBrewer")
library("irr")
library('readxl')
library("boot")
library("Hmisc")
#install.packages('stringi')
#install.packages('Hmisc')
library(boot)
library(effsize)
# ggplot theme
theme_set(theme_light())
pre <- read_excel("../data/data.xlsx", sheet = "Pre")
post <- read_excel("../data/data.xlsx", sheet = "Post")
pre <- subset(pre, id!=20)
post <- subset(post, id!=20)
pre2 <- subset(pre, select = -c(pre_2))
pre2 <- gather(pre2, key="question", value="val", 7:13)
post2 <- gather(post, key="question", value="val", 3:10)
pre_question_ids <- unique(pre2$question)
post_question_ids <- unique(post2$question)
pre2 <- pre2[,c("id", "study_type", "question", "val")]
post2 <- post2[,c("id", "study_type", "question", "val")]
df <- rbind(pre2, post2)
df %>%
ggplot(aes(x=study_type, y = val, color= study_type)) +
xlab("") + ylab("mean answer scale")+
ggtitle("95% CI for mean")+
stat_summary(fun.data = "mean_cl_boot", size = 0.5, position = position_nudge(x=0.00, y=0), alpha=1) +
coord_flip() +
facet_wrap(.~question)
compute_stats = function (df, qname) {
valc = filter(df, question == qname, study_type == 'control')$val
valh = filter(df, question == qname, study_type == 'hololens')$val
t = t.test(
valc,
valh,
conf.level=.95
)
d = cohen.d(valc, valh, paired=FALSE)
W = wilcox.test(x=valc, y=valh, na.rm=TRUE, paired=FALSE, exact=FALSE, conf.int=TRUE)
stats = data.frame(qname=c(qname), t=c(t$p.value), W=c(W[1]$statistic), d=c(d[3]$estimate))
return(stats)
}
a <- compute_stats(df, "post_5")
View(a)
qList <- unique(df$question)
stats <- data.frame()
rm(stats)
allStats <- data.frame()
for (q in qList) {
allStats <- rbind(allStats, compute_stats(df, q))
}
View(allStats)
compute_stats = function (df, qname) {
valc = filter(df, question == qname, study_type == 'control')$val
valh = filter(df, question == qname, study_type == 'hololens')$val
t = t.test(
valc,
valh,
conf.level=.95
)
d = cohen.d(valc, valh, paired=FALSE)
W = wilcox.test(x=valc, y=valh, na.rm=TRUE, paired=FALSE, exact=FALSE, conf.int=TRUE)
stats = data.frame(qname=c(qname), p=c(t$p.value), W=c(W[1]$statistic), d=c(d[3]$estimate))
return(stats)
}
qList <- unique(df$question)
allStats <- data.frame()
for (q in qList) {
allStats <- rbind(allStats, compute_stats(df, q))
}
View(allStats)
